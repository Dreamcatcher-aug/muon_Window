# 项目简介
## 背景
　　缪子是大气簇射中产生的pi介子衰变而来的基本粒子，具有很强的穿透能力，能够穿透数十米甚至几百米的岩石。缪子透射成像是一种基于缪子的粒子成像技术，利用缪子穿过物体之后通量衰减的测量，推算所经过空间的物质分布。其测量对象主要为山体、建筑等，应用于无损考古、矿脉探测等领域。本课题即基于一套缪子透射成像装置数据采集软件。<br>
　　该缪子透射成像系统由阵列型塑料闪烁体探测器、前端电子学（FEE）、数据获取电路（DAQ）和计算机组成。当缪子穿过塑料闪烁体（塑闪）时，会与闪烁体中的原子或分子发生相互作用，产生荧光信号，进而由光电转化器件转化成电信号，再由FEE、DAQ对其进行数字化和打包上传，在计算机中进行存储和进一步处理。<br>
　　计算机和前端电路通过SiTCP协议进行通讯。SiTCP是 Tomohisa Uchida基于TCP/IP开发的一种通讯协议，由于该协议可在单个FPGA上实现，仅需要一个以太网物理层设备，原来受到硬件规模限制无法采用TCP/Ethernet协议的探测器前端电路因此能够利用千兆以太网和PC通讯。
## 课题简介
　　缪子成像系统中，各种配置命令和控制命令需要从计算机下达，使得成像系统正常工作，而从前端电路采集的数据也需要由计算机接收存储并进一步处理，这需要设计一个上位机软件来实现。本课题将基于QT（一种跨平台C++应用程序开发框架）开发一个上位机软件，主要实现以下功能：<br>
	1.建立计算机与前端电路通讯：在计算机和DAQ之间实现SiTCP协议通讯；<br>
	2.配置与控制命令下发：允许用户调整探测器运行参数，实现配置命令的生成与发送，控制探测器的运行；<br>
	3.数据接收与存储：接收并保存前端电路采集的数据，以便进一步处理；<br>
	4.数据实时处理：对接收的数据根据实验需要进行实时处理，判断探测器运行情况。<br>
***
# 软件功能介绍（适用于最新版软件）
## TCP连接/发送命令界面功能说明(Connect and Send)
### TCP连接栏
　　该软件为中国科学技术大学μSTC项目设计。<br>
　　为适应该项目的前端硬件，程序的ip地址默认为192.168.10.16（可更改），端口号为24，如有需求可以修改。用户通过点击Connect按钮建立TCP连接，点击Cancel按钮终止TCP连接。
### 发送命令功能
#### Initialize
　　为方便用户使用，设置了四个快捷按键，包括CLK、ELINK、FEE_ON、FEE_OFF<br>
#### Command Out
　　点击open按键选择需要发送的命令文件（.dat格式），此处允许用户同时选择多个文件，程序将依次读取各文件的内容。<br>
　　点击cancel按键取消文件选择。<br>
　　点击send按键即可发送命令内容至指定的ip地址与端口号<br>
　　设置了一个进度条来显示每一条命令发送的进程。
#### status bar
　　该板块的文本框用于输出当前程序的实时状态，如tcp连接提示，命令文件读取提示，命令发送结果提示，数据流接收结果提示，参数配置文件生成结果提示。
#### command out
　　该板块的文本框用于快捷命令发送后的内容展示和命令文件发送前的内容预览。
## 数据流接收界面功能说明
### receive configuration
　　允许用户选择按时间长短和文件大小分割接收的数据流。时间长短的分割各栏默认为0，用户只需填写相应单位的输入框，按文件大分割同理。<br>
　　完成分割设置之后，用户可以自定义接收数据文件的前缀名，程序将自动在前缀后加上时间戳，方便用户离线查看接收的数据。<br>
　　最后用户需要自定义文件保存的位置，首次使用软件时，文件路径为用户主路径
